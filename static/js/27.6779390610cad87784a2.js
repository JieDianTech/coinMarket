webpackJsonp([27],{ShZm:function(t,e){},j1Jb:function(t,e){},sRFk:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("4Hxo"),o=s("4c0y"),a=s("l8ax"),r=s("Xg5d"),n=s("P+7r"),l=s("Xbt8"),c=s("zhgr"),u=s("l2xq"),h=s("z8lK"),d={components:{Theader:o.default,errbox:a.a,alert:r.a,Tinput:n.a,mobile:l.a,Tpasswd:c.a,smscode:u.a,emailcode:h.a},data:function(){return{step:1,mobile:"",email:"",smscode:"",realname:"",idcard:"",passwd:"",passwdCfm:"",alertContent:"",isShowAlert:!1,errboxText:"",isShowErrbox:!1,isMobile:!0}},computed:{headText:function(){return 4===this.step?"更新密码":"忘记密码"},stepText:function(){return 4===this.step?"提交":"下一步"}},watch:{isShowAlert:function(t){!t&&this.alertContent.cb&&(this.alertContent.cb(),this.alertContent.cb=null)}},beforeDestroy:function(){document.body.classList.remove("app-user-body")},created:function(){document.body.classList.add("app-user-body")},methods:{submit:function(){var t=this;if(this.validate()){if(1===this.step)return this.step=2;2===this.step&&Object(i.i)(this.isMobile?this.smscode:this.emailcode).then(function(e){e.success?t.step=e.needAuthIdentity?3:4:(t.isShowErrbox=!0,t.errboxText=e.msg)}),3===this.step&&Object(i.g)(this.realname,this.idcard).then(function(e){e.success?t.step=4:(t.isShowErrbox=!0,t.errboxText=e.msg)}),4===this.step&&Object(i.f)(this.passwd,this.isMobile?"mobile":"email").then(function(e){e.success?(t.isShowAlert=!0,t.alertContent={text:"更新密码成功，请重新登录",cb:function(){history.back()}}):(t.isShowErrbox=!0,t.errboxText=e.msg)})}},validate:function(){if(1===this.step){if(this.isMobile){if(!this.mobile)return this.errboxText="请输入正确的手机号码",!(this.isShowErrbox=!0)}else if(!this.email||this.email.indexOf("@")<0)return this.errboxText="请输入正确的邮箱",!(this.isShowErrbox=!0)}else if(2===this.step){if(this.isMobile){if(!this.smscode)return this.errboxText="请输入短信验证码",!(this.isShowErrbox=!0)}else if(!this.email)return this.errboxText="请输入邮箱验证码",!(this.isShowErrbox=!0)}else if(3===this.step){if(!this.realname)return this.errboxText="请输入您的姓名",!(this.isShowErrbox=!0);if(!this.idcard)return this.errboxText="请输入您的身份证号码",!(this.isShowErrbox=!0)}else{if(!this.passwd)return this.errboxText="请输入新的6~16位密码",!(this.isShowErrbox=!0);if(this.passwd!==this.passwdCfm)return this.errboxText="二次输入的密码不一致",!(this.isShowErrbox=!0)}return!0}}},b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app app-findback",attrs:{id:"app"}},[i("article",{staticClass:"page page-findback"},[i("Theader",[i("img",{attrs:{src:s("kzYi"),alt:"logo"}})]),t._v(" "),i("main",[i("section",{staticClass:"head"},[i("h3",[t._v(t._s(t.headText))]),t._v(" "),i("span",{staticClass:"mod-radio-yn"},[i("b",{class:{cur:!0===t.isMobile},on:{click:function(e){t.isMobile=!0,t.step=1}}},[t._v("手机")]),t._v(" "),i("b",{class:{cur:!1===t.isMobile},on:{click:function(e){t.isMobile=!1,t.step=1}}},[t._v("邮箱")])])]),t._v(" "),i("section",{staticClass:"inputs"},[1===t.step?[t.isMobile?i("mobile",{attrs:{value:t.mobile},on:{"update:value":function(e){t.mobile=e}}}):t._e(),t._v(" "),t.isMobile?t._e():i("Tinput",{attrs:{tip:"请输入您的邮箱地址",value:t.email,icon:"icon-email"},on:{"update:value":function(e){t.email=e}}})]:t._e(),t._v(" "),2===t.step?[t.isMobile?i("smscode",{attrs:{value:t.smscode,mobile:t.mobile,type:"findback"},on:{"update:value":function(e){t.smscode=e}}}):t._e(),t._v(" "),t.isMobile?t._e():i("emailcode",{attrs:{value:t.emailcode,email:t.email,type:"findback"},on:{"update:value":function(e){t.emailcode=e}}})]:t._e(),t._v(" "),3===t.step?[i("Tinput",{attrs:{value:t.realname,icon:"icon-nicheng",tip:"请输入您已认证的真实姓名"},on:{"update:value":function(e){t.realname=e}}}),t._v(" "),i("c-idcard",{attrs:{value:t.idcard,tip:"请您已认证的真实身份证号"},on:{"update:value":function(e){t.idcard=e}}})]:t._e(),t._v(" "),4===t.step?[i("Tpasswd",{key:"passwd",attrs:{value:t.passwd,tip:"设置新的6-16位密码"},on:{"update:value":function(e){t.passwd=e}}}),t._v(" "),i("Tpasswd",{key:"passwdCfm",attrs:{value:t.passwdCfm,tip:"请再次输入新的密码"},on:{"update:value":function(e){t.passwdCfm=e}}})]:t._e()],2),t._v(" "),i("section",{staticClass:"action"},[i("button",{staticClass:"button",on:{click:t.submit}},[t._v(t._s(t.stepText))])])])],1),t._v(" "),i("alert",{attrs:{show:t.isShowAlert,header:!1},on:{"update:show":function(e){t.isShowAlert=e}}},[i("p",{staticClass:"text-center"},[i("br"),t._v("\n      "+t._s(t.alertContent.text||t.alertContent)+"\n      "),i("br"),t._v(" "),i("br")])]),t._v(" "),i("errbox",{attrs:{show:t.isShowErrbox,text:t.errboxText},on:{"update:show":function(e){t.isShowErrbox=e}}})],1)},staticRenderFns:[]};var p=s("VU/8")(d,b,!1,function(t){s("j1Jb"),s("ShZm")},null,null);e.default=p.exports}});