webpackJsonp([22],{"5yrP":function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=n("4Hxo"),e=n("0lui"),o=n("4c0y"),i=n("P+7r"),c=n("KR8W"),u=n("l8ax"),r=n("PHmm"),l=n("l2xq"),d=n("6W4/"),h={components:{Theader:o.default,toast:c.a,errbox:u.a,Tinput:i.a,confirm:r.a,smscode:l.a,menuList:d.a},data:function(){return{banks:[{name:"支付宝",code:"alipay"},{name:"微信",code:"wechat"}],username:"",name:"",bankName:"",bankNo:"",smscode:"",toastText:"",isShowToast:!1,errboxText:"",isShowErrbox:!1,isShowBanks:!1,isShowAuth:!1}},computed:{disabled:function(){return!(this.bankName&&this.bankNo&&this.name&&this.smscode)}},created:function(){this.initPage()},methods:{initPage:function(){this.getUserInfo()},getUserInfo:function(){var t=this;Object(a.G)().then(function(s){s.isIdentityAuth=1<=s.identityAuthStatus,s.success&&(t.username=s.name,s.isIdentityAuth||(t.isShowAuth=!0))})},onBankSelected:function(t){this.isShowBanks=!1,this.bankName=t.name},submit:function(){var t=this,s={bank:this.bankName,name:this.name,bankNo:this.bankNo,checkCode:this.smscode};Object(a.Q)(s).then(function(s){s.success?(t.isShowToast=!0,t.toastText="添加成功",t.bankNo=!1,t.smscode=!1,setTimeout(function(){return history.backAndReload(!1)},1e3)):(t.isShowErrbox=!0,t.errboxText=s.msg)})},onFocusSms:function(){e.j.a.android&&document.querySelector("#app").classList.add("in-focus")},onBlurSms:function(){e.j.a.android&&document.querySelector("#app").classList.remove("in-focus")},goBack:function(){this.$router.go(-1)},goPage:function(t){this.$router.push(t)}}},m={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"app app-bankcard-add",attrs:{id:"app"}},[n("article",{staticClass:"page page-bankcard-add"},[n("Theader",[t._v("添加三方支付")]),t._v(" "),n("main",[n("section",{staticClass:"inputs"},[n("ul",[n("li",{staticClass:"own"},[n("h4",[n("span",[t._v("姓名")]),t._v(" "),n("b",[t._v(t._s(t.username))])]),t._v(" "),n("p",{staticClass:"own-tips text-stress"},[t._v("只能添加与该姓名一致的支付方式")])]),t._v(" "),n("li",{staticClass:"bank"},[n("h4",[t._v("支付方式")]),t._v(" "),n("div",{staticClass:"mod-select-split",on:{click:function(s){t.isShowBanks=!0}}},[n("span",[t._v(t._s(t.bankName||"请选择"))]),t._v(" "),n("i",{staticClass:"iconfont icon-jiantou"})])]),t._v(" "),n("li",[n("h4",[t._v("姓名")]),t._v(" "),n("Tinput",{attrs:{value:t.name,tip:"请输入姓名"},on:{"update:value":function(s){t.name=s}}})],1),t._v(" "),n("li",[n("h4",[t._v("账号")]),t._v(" "),n("Tinput",{attrs:{value:t.bankNo,tip:"请输入支付接收账号"},on:{"update:value":function(s){t.bankNo=s}}})],1),t._v(" "),n("li",[n("h4",[t._v("短信验证码")]),t._v(" "),n("smscode",{attrs:{value:t.smscode,len:6,icon:!1,mobile:"",type:"bankcard"},on:{"update:value":function(s){t.smscode=s},focus:t.onFocusSms,blur:t.onBlurSms}})],1)])]),t._v(" "),n("section",{staticClass:"action"},[n("button",{staticClass:"button",attrs:{disabled:t.disabled},on:{click:t.submit}},[t._v("提交")])])])],1),t._v(" "),n("toast",{attrs:{show:t.isShowToast,text:t.toastText},on:{"update:show":function(s){t.isShowToast=s}}}),t._v(" "),n("errbox",{attrs:{show:t.isShowErrbox,text:t.errboxText},on:{"update:show":function(s){t.isShowErrbox=s}}}),t._v(" "),n("confirm",{attrs:{show:t.isShowAuth,"no-text":"返回","ok-text":"认证"},on:{"update:show":function(s){t.isShowAuth=s},ok:function(s){return t.goPage("/user/realname")},no:t.goBack}},[n("div",{staticClass:"text-center",attrs:{slot:"main"},slot:"main"},[n("br"),t._v(" "),n("p",[t._v("您当前还未进行身份认证，请先认证")]),t._v(" "),n("br")])]),t._v(" "),n("menuList",{attrs:{show:t.isShowBanks},on:{"update:show":function(s){t.isShowBanks=s}}},[n("ul",t._l(t.banks,function(s){return n("li",{class:{cur:s.name===t.bankName},on:{click:function(n){return t.onBankSelected(s)}}},[t._v(t._s(s.name))])}),0)])],1)},staticRenderFns:[]};var v=n("VU/8")(h,m,!1,function(t){n("TCkS"),n("i/k8")},null,null);s.default=v.exports},TCkS:function(t,s){},"i/k8":function(t,s){}});