webpackJsonp([19],{"0Rmr":function(t,e){},"L/c2":function(t,e){},UbA5:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("BO1k"),n=o.n(a),s=o("4c0y"),i=o("l8ax"),r=o("KR8W"),c={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var u=o("VU/8")({},c,!1,function(t){o("kIku")},null,null).exports,l=o("PHmm"),d=o("4Hxo"),h=o("0lui"),f={components:{Theader:s.default,bankicon:u,toast:r.a,errbox:i.a,confirm:l.a},data:function(){return{o:{},list:[],toastText:"",isShowBankcardAdd:!1,isShowToast:!1,errboxText:"",isShowErrbox:!1,isShowAuth:!1,isShowRemove:!1,isShowSetDefault:!1}},filters:{shortNo:function(t){return t&&t.substr(t.length-4)}},created:function(){var t=this;Object(d.j)().then(function(e){if(e.success)if(!1===e.isIdentityAuth)t.isShowAuth=!0;else{var o=!0,a=!1,s=void 0;try{for(var i,r=n()(e.bankcards);!(o=(i=r.next()).done);o=!0){var c=i.value;t.setHideNo(c)}}catch(e){a=!0,s=e}finally{try{o||null==r.return||r.return()}finally{if(a)throw s}}t.list=e.bankcards,t.isShowBankcardAdd=t.list.length<5}})},methods:{setHideNo:function(t){var e=t.cardNumber.length-4;t.hide=!0,t.cardNo="***** **** **** "+t.cardNumber.substr(e)},setDefault:function(t,e){var o=this;1!==t.defaultCard&&(2===e?Object(d.d)(t.id).then(function(t){t.success?(o.isShowToast=!0,o.toastText="设置默认银行卡成功",o.updateDefaultCardNo()):(o.isShowErrbox=!0,o.errboxText=t.msg)}):(this.isShowSetDefault=!0,this.o=t))},removeBank:function(t,e){var o=this;2===e?Object(d.b)(t.id).then(function(t){t.success?(o.isShowToast=!0,o.toastText="删除银行卡成功",o.removeFromParent()):(o.isShowErrbox=!0,o.errboxText=t.msg)}):(this.isShowRemove=!0,this.o=t)},updateDefaultCardNo:function(){var t=!0,e=!1,o=void 0;try{for(var a,s=n()(this.list);!(t=(a=s.next()).done);t=!0)a.value.defaultCard=0}catch(t){e=!0,o=t}finally{try{t||null==s.return||s.return()}finally{if(e)throw o}}this.o.defaultCard=1},removeFromParent:function(){var t=!0,e=!1,o=void 0;try{for(var a,s=n()(this.list.entries());!(t=(a=s.next()).done);t=!0){var i=m(a.value,2),r=i[0];if(i[1].id===this.o.id){this.list.splice(r,1);break}}}catch(t){e=!0,o=t}finally{try{t||null==s.return||s.return()}finally{if(e)throw o}}this.isShowBankcardAdd=this.list.length<5},toggle:function(t){t.hide?(t.hide=!1,1==t.type?t.cardNo=h.b.formatBankcard(t.cardNumber):t.cardNo=t.cardNumber):this.setHideNo(t)},getBankCode:function(t){return Object(h.h)(t.bank)},goPage:function(t){this.$router.push(t)},goBack:function(){this.$router.go(-1)},goRealname:function(){this.$router.push("/user/realname")}}},v={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app app-bankcard",attrs:{id:"app"}},[o("article",{staticClass:"page page-bankcard"},[o("Theader",[t._v("支付方式")]),t._v(" "),o("main",[o("section",{staticClass:"list"},[o("ul",t._l(t.list,function(e){return o("li",{key:e.id,class:{def:e.defaultCard},on:{click:function(o){return t.setDefault(e)}}},[o("div",[1==e.type?o("img",{attrs:{src:"../../../static/img/bank/"+t.getBankCode(e)+".png"}}):t._e(),t._v(" "),2==e.type?o("img",{attrs:{src:"../../../static/img/bank/zfb.png"}}):t._e(),t._v(" "),3==e.type?o("img",{attrs:{src:"../../../static/img/bank/wxzf.png"}}):t._e(),t._v(" "),o("div",[o("h4",[o("b",[t._v(t._s(e.bank))]),t._v(" "),1==e.type||e.hide?t._e():o("span",[t._v(t._s(e.subbranch))]),t._v(" "),e.defaultCard?o("span",[t._v("默认卡")]):t._e()]),t._v(" "),o("p",[o("b",[t._v(t._s(e.cardNo))]),t._v(" "),o("span",{staticClass:"toggle",on:{click:function(o){return o.stopPropagation(),t.toggle(e)}}},[t._v(t._s(e.hide?"显示":"隐藏"))])])])]),t._v(" "),o("div",[o("i",{staticClass:"iconfont icon-lajitong",on:{click:function(o){return o.stopPropagation(),t.removeBank(e)}}})])])}),0)]),t._v(" "),t.isShowBankcardAdd?o("section",{staticClass:"action clos"},[o("div",{on:{click:function(e){return t.goPage("/user/pay/add")}}},[o("i",{staticClass:"iconfont icon-jia"})]),t._v(" "),o("p",[t._v("添加支付宝微信")])]):t._e(),t._v(" "),t.isShowBankcardAdd?o("section",{staticClass:"action clos"},[o("div",{on:{click:function(e){return t.goPage("/user/bankcard/add")}}},[o("i",{staticClass:"iconfont icon-jia"})]),t._v(" "),o("p",[t._v("添加银行卡")])]):t._e()])],1),t._v(" "),o("toast",{attrs:{show:t.isShowToast,text:t.toastText},on:{"update:show":function(e){t.isShowToast=e}}}),t._v(" "),o("errbox",{attrs:{show:t.isShowErrbox,text:t.errboxText},on:{"update:show":function(e){t.isShowErrbox=e}}}),t._v(" "),o("confirm",{attrs:{show:t.isShowAuth,"no-text":"返回","ok-text":"认证"},on:{"update:show":function(e){t.isShowAuth=e},ok:t.goRealname,no:t.goBack}},[o("div",{staticClass:"text-center",attrs:{slot:"main"},slot:"main"},[o("br"),t._v(" "),o("p",[t._v("您当前还未进行身份认证，请先认证")]),t._v(" "),o("br")])]),t._v(" "),o("confirm",{attrs:{show:t.isShowSetDefault},on:{"update:show":function(e){t.isShowSetDefault=e},ok:function(e){return t.setDefault(t.o,2)}}},[o("div",{staticClass:"text-center",attrs:{slot:"main"},slot:"main"},[o("br"),t._v(" "),o("p",[t._v("将 "+t._s(t.o.bank)+"("+t._s(t._f("shortNo")(t.o.cardNumber))+") 设置为默认银行卡？")]),t._v(" "),o("br")])]),t._v(" "),o("confirm",{attrs:{show:t.isShowRemove},on:{"update:show":function(e){t.isShowRemove=e},ok:function(e){return t.removeBank(t.o,2)}}},[o("div",{staticClass:"text-center",attrs:{slot:"main"},slot:"main"},[o("br"),t._v(" "),o("p",[t._v("您确定要删除 "+t._s(t.o.bank)+"("+t._s(t._f("shortNo")(t.o.cardNumber))+") 银行卡？")]),t._v(" "),o("br")])])],1)},staticRenderFns:[]};var _=o("VU/8")(f,v,!1,function(t){o("0Rmr"),o("L/c2")},null,null);e.default=_.exports},kIku:function(t,e){}});